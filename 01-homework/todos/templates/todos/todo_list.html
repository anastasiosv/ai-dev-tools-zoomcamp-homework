{% extends 'base.html' %}

{% block page_title %}All TODOs{% endblock %}

{% block content %}
    {% if todos %}
        {% for todo in todos %}
            <div class="todo-item {% if todo.resolved %}resolved{% endif %}">
                <h2><a href="{% url 'todo_detail' todo.pk %}">{{ todo.title }}</a></h2>
                <p>Due: {{ todo.due_date|default:"No due date" }}</p>
                <div class="todo-actions">
                    <a href="{% url 'todo_update' todo.pk %}">Edit</a>
                    <a href="{% url 'todo_delete' todo.pk %}">Delete</a>
                    <form action="{% url 'todo_toggle_resolved' todo.pk %}" method="post">
                        {% csrf_token %}
                        <button type="submit">{% if todo.resolved %}Unmark as Done{% else %}Mark as Done{% endif %}</button>
                    </form>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>No TODOs found. <a href="{% url 'todo_create' %}">Add one!</a></p>
    {% endif %}
{% endblock %}